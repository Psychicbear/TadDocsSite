/**
 * Intended for pages with a #system-dialog element.
 * Pair of convenient functions can hook into with onclick attributes,
 * if a page only has one dialog saves writing some very repititive js that will be replaceable in a year or 2 by the upcoming Invoker API anyhow
 * @todo remove and replace with Invoker Api once its supported
 * @see https://developer.mozilla.org/en-US/docs/Web/API/Invoker_Commands_API
 */

/**
 * Opens the first dialog in the document.
 * @param {Event} event
 */
function openDialog(event) {
    document.querySelector("#system-dialog").showModal();
}

/**
 * Closes the first dialog in the document.
 * @param {Event} event
 */
function closeDialog(event) {
    document.querySelector("#system-dialog").close();
}

// const dialog = document.querySelector("dialog");
document
    .querySelector("#system-dialog")
    .addEventListener("click", closeDialogByClicking);
/**
 * If you click on an element held in the dialog, it will not be the event.target but the ::backdrop IS part of the dialog
 * So when you click anything that isn't the dialog contents it will make the event.target the dialog.
 * So we can then assume we are clicking out of the dialog to close it.
 * @param {Event} event
 */
function closeDialogByClicking(event) {
    if (event.target === document.querySelector("#system-dialog")) {
        document.querySelector("#system-dialog").close();
    }
}
