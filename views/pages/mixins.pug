
mixin breadcrumbs(slug, oob="false")
    div(id="docs-breadcrumb" class="flex2" hx-swap-oob=`${oob}`)
        - const parts = slug.split('/').filter(part => part.length > 0);
        - let path = '';
        nav(aria-label="breadcrumb" style="--pico-nav-breadcrumb-divider: '.';")
            ul.breadcrumb
                li
                    if (parts.length === 1)
                        a(href="/tad" id="parent" hx-trigger="click, deletePageSuccess from:body" hx-get=`/tad` hx-target="#page-details" hx-swap="outerHTML" hx-push-url="true")='tad'
                    else
                        a(href="/tad" hx-get=`/tad` hx-target="#page-details" hx-swap="outerHTML" hx-push-url="true")='tad'
                each part, index in parts
                    - path += `${part}`;
                    if index === parts.length - 1
                        li=part
                    else
                        li
                            if (index === parts.length - 2)
                                a(href=`/tad/${path}` id=`parent` hx-trigger="click, deletePageSuccess from:body" hx-get=`/tad/${path}` hx-target="#page-details" hx-swap="outerHTML" hx-push-url="true")= part
                            else
                                a(href=`/tad/${path}` hx-get=`/tad/${path}` hx-target="#page-details" hx-swap="outerHTML" hx-push-url="true")= part
mixin libPath(slug)
    - let parts = slug.split('/').filter(part => part.length > 0).join('.');
    if parts.length > 0
        sub.lineh05="$." + parts

mixin editableField(heading, route, edit=false)
    div(class=`${heading}` hx-trigger="click[event.target.matches('i')] from:find .toggle-edit" hx-get=`${route}?edit=${!edit}` hx-target=`.${heading}` hx-swap="outerHTML")
        h4 heading
        |i(class="material-icons material-icon-button toggle-edit" role="button")= edit ? "check" : "edit"
        if block
            block

mixin materialIconButton(iconName, onClick)
    i(class=`material-icons material-icon-button` role="button" onClick=`${onClick}`)= iconName


mixin editableLi(page, method=false)
    li(id=page.id hx-swap="innerHTML").item
        if admin
            - let delSlug = "/"
            case page.page_type
                when 'class': - delSlug += "classes/"
                when 'method': - delSlug += "methods/"
                when 'property': - delSlug += "properties/"
            - delSlug += page.id + "?referrer=parent"
            div.viewItem.flex
                div.flex3
                    a(href=`/tad${page.slug}` hx-get=`/tad${page.slug}` hx-target="#page-details" hx-swap="outerHTML" hx-push-url="true")= page.name
                    if method
                        |&#40; 
                        if page.args.length
                            each arg, index in page.args
                                span(data-tooltip=`${arg.type}: ${arg.description}` data-placement="right" class="clickable")=`${arg.name}` 
                                if index < page.args.length - 1
                                    |, 
                        | &#41;
                    span=` - ${page.short_description}`
                div(role="group").flex1.text-right
                    i(role="button" title="Edit Module" onclick=`toggleEditItem(event)`).material-symbols-outlined edit
                    i(role="button" title="Delete Module" hx-delete=delSlug hx-confirm=`Are you sure you want to delete ${page.name}`).material-symbols-outlined delete 
            div.editItem.hidden
                form(id="edit-item" method="PUT" hx-put=`/tad/${page.id}?referrer=class&type=${page.page_type}` hx-on:htmx:before-send="toggleEditItem(event)")
                    div.grid.grid12.grid-gap0.m-bottom1   
                        input(style="grid-column: 1/3;" type="text" placeholder="Name" name="Name" value=page.name onkeydown="augment_textarea(event)")
                        input(style="grid-column: 3/12;" type="text" placeholder="Short Description" name="short_description" value=page.short_description onkeydown="augment_textarea(event)")
                        //- fieldset(style="grid-column: 12;").flex
                            //- i(role="button" type="submit" title="Confirm Edit").material-symbols-outlined.flex1 check
                        i(style="grid-column: 12;" role="button" title="Cancel Edit" onclick="toggleEditItem(event)").material-symbols-outlined.flex1 cancel
        else
            div.flex
                a(href=`/tad${page.slug}` hx-get=`/tad${page.slug}` hx-target="#page-details" hx-swap="outerHTML" hx-push-url="true").flex1.notextdecoration= page.name
                    if method
                        span.noborder
                            |&#40; 
                            if page.args.length
                                each arg, index in page.args
                                    - let type_class=""
                                    if(arg.type.toLowerCase()==="string")
                                        - type_class = "string"
                                    if(arg.type.toLowerCase()==="number")
                                        - type_class = "number"
                                    span(data-tooltip=`${arg.type}: ${arg.description}` data-placement="right" class=`clickable ${type_class}`)=`${arg.name}` 
                                    if index < page.args.length - 1
                                        span(class=`${type_class}`) , 
                            span.p025 &#41;
                span.comment.right-text.fs08.flex2=`${page.short_description}`